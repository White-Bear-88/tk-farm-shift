{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.233.0"},"children":{"TkFarmFrontendStack":{"id":"TkFarmFrontendStack","path":"TkFarmFrontendStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.233.0"},"children":{"FrontendBucket":{"id":"FrontendBucket","path":"TkFarmFrontendStack/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/FrontendBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"tk-farm-frontend-234737608655","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"TkFarmFrontendStack/FrontendBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/FrontendBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FrontendBucketEFE2E19C"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin1S3Origin5F5C0696","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:aws:cloudfront::234737608655:distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"TkFarmFrontendStack/FrontendBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"TkFarmFrontendStack/FrontendBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"TkFarmFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.233.0"},"children":{"Staging":{"id":"Staging","path":"TkFarmFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"Role":{"id":"Role","path":"TkFarmFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}},"Handler":{"id":"Handler","path":"TkFarmFrontendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"OAC":{"id":"OAC","path":"TkFarmFrontendStack/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/OAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"tk-farm-frontend-oac","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"CachePolicy":{"id":"CachePolicy","path":"TkFarmFrontendStack/CachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/CachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"tk-farm-no-cache","minTtl":0,"maxTtl":0,"defaultTtl":0,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":false,"enableAcceptEncodingBrotli":false,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"Distribution":{"id":"Distribution","path":"TkFarmFrontendStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.233.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"TkFarmFrontendStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"S3Origin":{"id":"S3Origin","path":"TkFarmFrontendStack/Distribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/Distribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for TkFarmFrontendStackDistributionOrigin14F69E097"}}}}}}}},"Resource":{"id":"Resource","path":"TkFarmFrontendStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["FrontendBucketEFE2E19C","RegionalDomainName"]},"id":"TkFarmFrontendStackDistributionOrigin14F69E097","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin1S3Origin5F5C0696"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"TkFarmFrontendStackDistributionOrigin14F69E097","cachePolicyId":{"Ref":"CachePolicy26D8A535"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true}}}}}},"DeployUser":{"id":"DeployUser","path":"TkFarmFrontendStack/DeployUser","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.User","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/DeployUser/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnUser","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::User","aws:cdk:cloudformation:props":{"userName":"tk-farm-deploy-user"}}}}},"DeployPolicy":{"id":"DeployPolicy","path":"TkFarmFrontendStack/DeployPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TkFarmFrontendStack/DeployPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:DeleteObject","s3:ListBucket","s3:PutObject","s3:PutObjectAcl"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":"cloudfront:CreateInvalidation","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:cloudfront::234737608655:distribution/",{"Ref":"Distribution830FAC52"}]]}}],"Version":"2012-10-17"},"policyName":"tk-farm-deploy-policy","users":[{"Ref":"DeployUser69680A0B"}]}}}}},"BucketName":{"id":"BucketName","path":"TkFarmFrontendStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"DistributionId":{"id":"DistributionId","path":"TkFarmFrontendStack/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"TkFarmFrontendStack/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"DeployUserName":{"id":"DeployUserName","path":"TkFarmFrontendStack/DeployUserName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"TkFarmFrontendStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"TkFarmFrontendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"TkFarmFrontendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.233.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"TkFarmFrontendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.233.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}